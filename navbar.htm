<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <meta name="creator" content="Pedro Oliva Rodrigues">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        html,body {
            overflow: unset;
            background-color: transparent;
        }
    </style>
</head>
<body onload="main()">

<!-- 
    height = 65px
    height dropdown = 185px 
    height smallnav = 360px 
-->

<nav class="w3-deep-orange">
    <div class="w3-bar w3-card w3-large w3-left-align">
        <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-large" 
        href="javascript:void(0);" target="_parent" id="btnShowNav">
            <i class="fa fa-bars"></i>
        </a>
        <a href="index.htm" target="_parent" class="w3-bar-item w3-button w3-padding-large w3-hover-white default">Home</a>
        <a href="downloads.htm" target="_parent" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Downloads</a>
        <div class="w3-dropdown-hover">
            <button class="w3-button w3-padding-large w3-hover-white w3-hide-small">dgVoodoo</button>
            <div class="w3-dropdown-content w3-bar-block w3-card-4 w3-hover-white">
                <a href="downloads.htm#dgvoodoo2" target="_parent" class="w3-bar-item w3-button">Download</a>
                <a href="dgvoodoo-doc.htm" target="_parent" class="w3-bar-item w3-button">Documentation</a>
                <a href="tested.htm" target="_parent" class="w3-bar-item w3-button" title="Games/Demos tested">Test results</a>
            </div>
        </div>
    </div>

    <!-- Navbar on small screens -->
    <div id=smallnav class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
        <a href="index.htm" target="_parent" class="w3-bar-item w3-button w3-padding-large">Home</a>
        <a href="downloads.htm" target="_parent" class="w3-bar-item w3-button w3-padding-large">Downloads</a>
        <button class="w3-button w3-hover-white w3-padding-large">dgVoodoo</button>
        <div class="w3-bar-block w3-padding-large">
            <a href="downloads.htm#dgvoodoo2" target="_parent" class="w3-bar-item w3-button">Download</a>
            <a href="dgvoodoo-doc.htm" target="_parent" class="w3-bar-item w3-button">Documentation</a>
            <a href="tested.htm" target="_parent" class="w3-bar-item w3-button">Test results</a>
        </div>
    </div>
</nav>

<script>
    var ifr = window.parent.document.querySelector('nav>iframe')

    function toggleNavmenu(evt) {
        var content = document.getElementById('smallnav')

        if (evt.type === 'focus') {
            content.classList.add('w3-show');
            ifr.style.height = '360px'
        } else if (evt.type === 'blur') {
            if (window.parent.document.body.hasFocus()) {
                content.classList.remove('w3-show');
                resetH()
            }
        } else if (evt.type === 'click') {
            ifr.style.height = content.classList.toggle('w3-show') ? '360px' : '60px';
        }
    }

    function file(href) {
        var parts = href.split('/')
        return parts[parts.length-1];
    }

    function resetH() { ifr.style.height = '60px' }

    function main() {
        var last = file(window.parent.document.location.pathname);
        var q = 'a[href="'+last+'"]'
        var a = document.querySelector(q)
        a.classList.toggle('w3-white')

        if (ifr) {
            var item = document.querySelector('.w3-dropdown-hover')
            item.onmouseover = () => ifr.style.height = '185px'
            item.onmouseout = resetH

            item = document.getElementById('btnShowNav')
            item.onfocus = item.onblur = toggleNavmenu
            item.onclick = toggleNavmenu
        }
    }
</script>
    
</body>
</html>